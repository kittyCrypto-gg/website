/* =========================================
    Module: Physics Animations
========================================= */

:root {
  --phys-default-duration: 520ms;
  --phys-default-ease: cubic-bezier(0.18, 0.9, 0.22, 1.15);

  /* Defaults (hoisted so you can theme/override globally if you want) */
  --phys-enter-x: 14px;
  --phys-overshoot-x: -3px;
  --phys-settle-x: 2px;

  --phys-scale-x0: 0.92;
  --phys-scale-y0: 1.04;
  --phys-scale-x1: 1.18;
  --phys-scale-y1: 0.94;
  --phys-scale-x2: 0.97;
  --phys-scale-y2: 1.02;

  --phys-text-delay: 160ms;
  --phys-text-x0: 3px;
  --phys-text-x1: -1px;

  --phys-origin-default-x: 50%;
  --phys-origin-y: 100%;

  --phys-final-x: 0px;
  --phys-final-scale: 1;
  --phys-text-boost-scale: 1.01;
  --phys-text-settle-scale: 0.995;
}

/* Base hook: add to the wrapper element you want to animate */
.phys {
  --phys-duration: var(--phys-default-duration);
  --phys-ease: var(--phys-default-ease);

  --phys-enter-x: var(--phys-enter-x);
  --phys-overshoot-x: var(--phys-overshoot-x);
  --phys-settle-x: var(--phys-settle-x);

  --phys-scale-x0: var(--phys-scale-x0);
  --phys-scale-y0: var(--phys-scale-y0);
  --phys-scale-x1: var(--phys-scale-x1);
  --phys-scale-y1: var(--phys-scale-y1);
  --phys-scale-x2: var(--phys-scale-x2);
  --phys-scale-y2: var(--phys-scale-y2);

  --phys-text-delay: var(--phys-text-delay);
  --phys-text-x0: var(--phys-text-x0);
  --phys-text-x1: var(--phys-text-x1);

  --phys-origin-x: var(--phys-origin-default-x);

  &.phys-play {
    &.phys-sms-enter {
      & .message {
        will-change: transform;
        transform-origin: var(--phys-origin-x) var(--phys-origin-y);
        animation: phys-sms-bubble var(--phys-duration) var(--phys-ease) both;
      }

      & .message-text {
        will-change: transform;
        animation: phys-sms-text var(--phys-duration) var(--phys-ease) forwards;
        animation-delay: var(--phys-text-delay);
      }

      &.in {
        --phys-origin-x: 100%;
      }

      &.out {
        --phys-origin-x: 0%;
      }
    }
  }
}

@keyframes phys-sms-bubble {
  0% {
    transform:
      translateX(var(--phys-enter-x))
      scaleX(var(--phys-scale-x0))
      scaleY(var(--phys-scale-y0));
  }

  52% {
    transform:
      translateX(var(--phys-overshoot-x))
      scaleX(var(--phys-scale-x1))
      scaleY(var(--phys-scale-y1));
  }

  76% {
    transform:
      translateX(var(--phys-settle-x))
      scaleX(var(--phys-scale-x2))
      scaleY(var(--phys-scale-y2));
  }

  100% {
    transform: translateX(var(--phys-final-x)) scaleX(var(--phys-final-scale)) scaleY(var(--phys-final-scale));
  }
}

@keyframes phys-sms-text {
  0% {
    transform: translateX(var(--phys-final-x)) scaleX(var(--phys-final-scale));
  }

  35% {
    transform: translateX(var(--phys-text-x0)) scaleX(var(--phys-text-boost-scale));
  }

  75% {
    transform: translateX(var(--phys-text-x1)) scaleX(var(--phys-text-settle-scale));
  }

  100% {
    transform: translateX(var(--phys-final-x)) scaleX(var(--phys-final-scale));
  }
}